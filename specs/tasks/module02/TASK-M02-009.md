# TASK-M02-009: Define EdgeType Enum

```xml
<task_spec id="TASK-M02-009" version="1.0">
<metadata>
  <title>Define EdgeType Enum</title>
  <status>ready</status>
  <layer>foundation</layer>
  <module>module-02</module>
  <sequence>9</sequence>
  <priority>high</priority>
  <estimated_hours>0.5</estimated_hours>
  <implements>
    <item>TECH-CORE-002 Section 2.5: EdgeType specification</item>
  </implements>
  <depends_on>
    <!-- No dependencies - this is a foundation task -->
  </depends_on>
  <estimated_complexity>low</estimated_complexity>
</metadata>

<context>
EdgeType enum defines the types of relationships that can exist between nodes in the Context Graph. Each edge type represents a different kind of semantic, temporal, causal, or hierarchical relationship. The edge type influences how the graph is traversed during queries and affects the neurotransmitter-modulated weight calculations.
</context>

<input_context_files>
  <file purpose="Constitution reference for edge model">docs2/constitution.yaml</file>
  <file purpose="PRD reference for edge types">docs2/contextprd.md</file>
</input_context_files>

<prerequisites>
  <check>crates/context-graph-core/src/marblestone.rs exists (from TASK-M02-007)</check>
</prerequisites>

<scope>
  <in_scope>
    - EdgeType enum with 4 variants: Semantic, Temporal, Causal, Hierarchical
    - Description method for each edge type
    - Default trait implementation (returns Semantic)
    - Display trait implementation
    - Serde Serialize/Deserialize derives with snake_case
    - Clone, Copy, Debug, PartialEq, Eq, Hash derives
    - Unit tests
  </in_scope>
  <out_of_scope>
    - GraphEdge struct (handled in TASK-M02-010)
    - Edge creation logic (handled in TASK-M02-011)
  </out_of_scope>
</scope>

<definition_of_done>
  <signatures>
    <signature file="crates/context-graph-core/src/marblestone.rs">
/// Type of relationship between two nodes in the graph.
#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum EdgeType {
    /// Semantic similarity relationship.
    /// Nodes share similar meaning or topic.
    Semantic,

    /// Temporal sequence relationship.
    /// Source occurred before target in time.
    Temporal,

    /// Causal relationship.
    /// Source causes or influences target.
    Causal,

    /// Hierarchical relationship.
    /// Source is a parent/ancestor of target.
    Hierarchical,
}

impl EdgeType {
    /// Returns a description of this edge type.
    pub fn description(&amp;self) -> &amp;'static str;

    /// Returns all edge type variants as an array.
    pub fn all() -> [EdgeType; 4];

    /// Returns the default weight for this edge type.
    pub fn default_weight(&amp;self) -> f32;
}

impl Default for EdgeType {
    fn default() -> Self;
}

impl std::fmt::Display for EdgeType {
    fn fmt(&amp;self, f: &amp;mut std::fmt::Formatter&lt;'_&gt;) -> std::fmt::Result;
}
    </signature>
  </signatures>

  <constraints>
    - Serde serialization must use snake_case
    - Copy trait for efficiency (small enum)
    - Default returns Semantic (most common edge type)
    - Module file must not exceed 500 lines (excluding tests)
  </constraints>

  <verification>
    - cargo build --package context-graph-core compiles without errors
    - cargo test --package context-graph-core edge_type passes all tests
    - cargo clippy --package context-graph-core shows no warnings
  </verification>
</definition_of_done>

<pseudo_code>
marblestone.rs (append):
  // EdgeType enum with derives
  #[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Serialize, Deserialize)]
  #[serde(rename_all = "snake_case")]
  pub enum EdgeType {
    Semantic,
    Temporal,
    Causal,
    Hierarchical,
  }

  impl EdgeType:
    fn description(&amp;self):
      match self:
        Semantic => "Semantic similarity - nodes share similar meaning"
        Temporal => "Temporal sequence - source precedes target in time"
        Causal => "Causal relationship - source causes/influences target"
        Hierarchical => "Hierarchical - source is parent/ancestor of target"

    fn all():
      [Semantic, Temporal, Causal, Hierarchical]

    fn default_weight(&amp;self):
      match self:
        Semantic => 0.5     // Similarity-based, varies
        Temporal => 0.7     // Sequence is reliable
        Causal => 0.8       // Strong relationship
        Hierarchical => 0.9 // Very strong relationship

  impl Default: Semantic
  impl Display: write variant name in lowercase

#[cfg(test)]
mod edge_type_tests:
  test_default_is_semantic()
  test_description_non_empty()
  test_all_returns_4_variants()
  test_default_weights()
  test_serde_snake_case()
  test_copy_trait()
</pseudo_code>

<files_to_create>
  <!-- File already exists from TASK-M02-007 -->
</files_to_create>

<files_to_modify>
  <file path="crates/context-graph-core/src/marblestone.rs">Add EdgeType enum and implementations</file>
  <file path="crates/context-graph-core/src/lib.rs">Re-export EdgeType</file>
</files_to_modify>

<validation_criteria>
  <criterion>EdgeType enum compiles with 4 variants: Semantic, Temporal, Causal, Hierarchical</criterion>
  <criterion>Default implementation returns Semantic</criterion>
  <criterion>Serde serialization uses snake_case names</criterion>
  <criterion>description() returns non-empty strings for all variants</criterion>
  <criterion>all() returns array containing all 4 variants</criterion>
  <criterion>default_weight() returns appropriate values for each type</criterion>
  <criterion>Copy trait is implemented for efficiency</criterion>
</validation_criteria>

<test_commands>
  <command>cargo build --package context-graph-core</command>
  <command>cargo test --package context-graph-core edge_type -- --nocapture</command>
  <command>cargo clippy --package context-graph-core -- -D warnings</command>
</test_commands>
</task_spec>
```

## Implementation Notes

### Constitution Reference
From constitution.yaml edge_model.attrs:
```yaml
attrs: [source:UUID, target:UUID, type:Semantic|Temporal|Causal|Hierarchical|Relational, ...]
```

Note: The PRD mentions `Relational` as a fifth type. However, the primary specification lists only 4 types. The `Relational` type can be added later if needed as it's mainly used for priors_vibe_check edges.

### Edge Type Semantics
| Type | Meaning | Use Case |
|------|---------|----------|
| Semantic | Similarity | Similar topics, related concepts |
| Temporal | Sequence | Events in order, workflow steps |
| Causal | Cause-effect | Dependencies, influences |
| Hierarchical | Parent-child | IS-A relationships, taxonomies |

### Default Weights Rationale
- Semantic (0.5): Variable based on embedding similarity
- Temporal (0.7): Time relationships are usually reliable
- Causal (0.8): Cause-effect is strong evidence
- Hierarchical (0.9): Taxonomy relationships are very strong

---

*Task ID: TASK-M02-009*
*Module: 02 - Core Infrastructure*
*Layer: Foundation*
