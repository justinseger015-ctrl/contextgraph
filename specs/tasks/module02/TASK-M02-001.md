# TASK-M02-001: Define JohariQuadrant Enum

```xml
<task_spec id="TASK-M02-001" version="1.0">
<metadata>
  <title>Define JohariQuadrant Enum</title>
  <status>ready</status>
  <layer>foundation</layer>
  <module>module-02</module>
  <sequence>1</sequence>
  <priority>critical</priority>
  <estimated_hours>2</estimated_hours>
  <implements>
    <item>REQ-CORE-001: Johari quadrant requirements</item>
    <item>TECH-CORE-002 Section 2.2: JohariQuadrant specification</item>
  </implements>
  <depends_on>
    <!-- No dependencies - this is a foundation task -->
  </depends_on>
  <estimated_complexity>low</estimated_complexity>
</metadata>

<context>
The JohariQuadrant enum is a foundational type representing the four quadrants of the Johari Window psychological model adapted for knowledge graph classification. Each quadrant determines how memories are retrieved and weighted in the UTL (Unified Theory of Learning) system. This enum is used throughout the system for categorizing memories and determining retrieval strategies.
</context>

<input_context_files>
  <file purpose="Constitution reference for naming conventions">docs2/constitution.yaml</file>
  <file purpose="PRD reference for Johari quadrant behavior">docs2/contextprd.md</file>
</input_context_files>

<prerequisites>
  <check>crates/context-graph-core directory exists</check>
  <check>Cargo.toml for context-graph-core crate exists</check>
</prerequisites>

<scope>
  <in_scope>
    - JohariQuadrant enum definition with 4 variants: Open, Hidden, Blind, Unknown
    - is_self_aware() method
    - is_other_aware() method
    - default_retrieval_weight() method returning f32
    - include_in_default_context() method returning bool
    - description() method returning &'static str
    - column_family() method returning &'static str for RocksDB CF names
    - from_str() implementation
    - all() class method returning iterator/array of all variants
    - Default trait implementation (returns Open)
    - Display trait implementation
    - Serde Serialize/Deserialize derives
    - Clone, Copy, Debug, PartialEq, Eq, Hash derives
    - Unit tests for all methods
  </in_scope>
  <out_of_scope>
    - JohariTransition struct (handled in TASK-M02-012)
    - TransitionTrigger enum (handled in TASK-M02-012)
    - Integration with MemoryNode (handled in TASK-M02-005)
  </out_of_scope>
</scope>

<definition_of_done>
  <signatures>
    <signature file="crates/context-graph-core/src/johari.rs">
/// Represents the four quadrants of the Johari Window model for memory classification.
#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum JohariQuadrant {
    Open,
    Hidden,
    Blind,
    Unknown,
}

impl JohariQuadrant {
    /// Returns true if this quadrant represents self-aware knowledge.
    /// Open and Hidden quadrants are self-aware.
    pub fn is_self_aware(&amp;self) -> bool;

    /// Returns true if this quadrant represents knowledge visible to others.
    /// Open and Blind quadrants are other-aware.
    pub fn is_other_aware(&amp;self) -> bool;

    /// Returns the default retrieval weight for this quadrant.
    /// Open=1.0, Hidden=0.3, Blind=0.7, Unknown=0.5
    pub fn default_retrieval_weight(&amp;self) -> f32;

    /// Returns whether this quadrant should be included in default context retrieval.
    pub fn include_in_default_context(&amp;self) -> bool;

    /// Returns a human-readable description of this quadrant.
    pub fn description(&amp;self) -> &amp;'static str;

    /// Returns the RocksDB column family name for this quadrant.
    pub fn column_family(&amp;self) -> &amp;'static str;

    /// Returns all quadrant variants as an array.
    pub fn all() -> [JohariQuadrant; 4];
}

impl Default for JohariQuadrant {
    fn default() -> Self;
}

impl std::fmt::Display for JohariQuadrant {
    fn fmt(&amp;self, f: &amp;mut std::fmt::Formatter&lt;'_&gt;) -> std::fmt::Result;
}

impl std::str::FromStr for JohariQuadrant {
    type Err = String;
    fn from_str(s: &amp;str) -> Result&lt;Self, Self::Err&gt;;
}
    </signature>
  </signatures>

  <constraints>
    - All weight values must be in range [0.0, 1.0]
    - Serde serialization must use snake_case for JSON compatibility
    - Column family names must match: "johari_open", "johari_hidden", "johari_blind", "johari_unknown"
    - Module file must not exceed 500 lines (excluding tests)
    - Follow Rust naming conventions per constitution.yaml
  </constraints>

  <verification>
    - cargo build --package context-graph-core compiles without errors
    - cargo test --package context-graph-core johari passes all tests
    - cargo clippy --package context-graph-core shows no warnings
    - cargo fmt --package context-graph-core --check passes
  </verification>
</definition_of_done>

<pseudo_code>
johari.rs:
  // Module documentation
  // Imports: serde, std::str::FromStr, std::fmt

  // JohariQuadrant enum with derives
  // Four variants: Open, Hidden, Blind, Unknown

  impl JohariQuadrant:
    fn is_self_aware():
      match self: Open|Hidden => true, _ => false

    fn is_other_aware():
      match self: Open|Blind => true, _ => false

    fn default_retrieval_weight():
      match self: Open=>1.0, Hidden=>0.3, Blind=>0.7, Unknown=>0.5

    fn include_in_default_context():
      match self: Open|Blind => true, Hidden => false, Unknown => true

    fn description():
      match self:
        Open => "Known to self and others - direct recall"
        Hidden => "Known to self, hidden from others - private knowledge"
        Blind => "Unknown to self, known to others - discovered patterns"
        Unknown => "Unknown to both - frontier knowledge"

    fn column_family():
      match self: Open=>"johari_open", Hidden=>"johari_hidden", etc.

    fn all():
      [Open, Hidden, Blind, Unknown]

  impl Default: return Open
  impl Display: write quadrant name
  impl FromStr: parse case-insensitive string to variant

#[cfg(test)]
mod tests:
  test_is_self_aware()
  test_is_other_aware()
  test_default_retrieval_weight()
  test_column_family()
  test_serde_roundtrip()
  test_from_str()
  test_all_variants()
</pseudo_code>

<files_to_create>
  <file path="crates/context-graph-core/src/johari.rs">JohariQuadrant enum and implementations</file>
</files_to_create>

<files_to_modify>
  <file path="crates/context-graph-core/src/lib.rs">Add pub mod johari; and re-export JohariQuadrant</file>
</files_to_modify>

<validation_criteria>
  <criterion>JohariQuadrant enum compiles with Open, Hidden, Blind, Unknown variants</criterion>
  <criterion>is_self_aware() returns true for Open and Hidden, false otherwise</criterion>
  <criterion>is_other_aware() returns true for Open and Blind, false otherwise</criterion>
  <criterion>default_retrieval_weight() returns: Open=1.0, Hidden=0.3, Blind=0.7, Unknown=0.5</criterion>
  <criterion>column_family() returns correct CF names matching "johari_*" pattern</criterion>
  <criterion>Serde round-trip serialization/deserialization works correctly</criterion>
  <criterion>from_str() parses all variants case-insensitively</criterion>
  <criterion>all() returns array containing all 4 variants</criterion>
  <criterion>Default implementation returns Open</criterion>
  <criterion>Unit tests achieve 100% coverage of public methods</criterion>
</validation_criteria>

<test_commands>
  <command>cargo build --package context-graph-core</command>
  <command>cargo test --package context-graph-core johari -- --nocapture</command>
  <command>cargo clippy --package context-graph-core -- -D warnings</command>
  <command>cargo fmt --package context-graph-core --check</command>
</test_commands>
</task_spec>
```

## Implementation Notes

### UTL Integration (Reference)
From the constitution, the Johari quadrants map to UTL states:
- **Open**: ΔS<0.5, ΔC>0.5 → direct recall
- **Blind**: ΔS>0.5, ΔC<0.5 → discovery (epistemic_action/dream)
- **Hidden**: ΔS<0.5, ΔC<0.5 → private (get_neighborhood)
- **Unknown**: ΔS>0.5, ΔC>0.5 → frontier

### Performance Target
Per constitution.yaml, operations on this enum should be O(1) and involve no allocations.

---

*Task ID: TASK-M02-001*
*Module: 02 - Core Infrastructure*
*Layer: Foundation*
